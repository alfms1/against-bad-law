<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“± ëª¨ë°”ì¼ ë¶ë§ˆí´ë¦¿ ì‹¤ì „ í…ŒìŠ¤íŠ¸</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 100%;
      margin: 0;
      padding: 15px;
      line-height: 1.6;
      background: #f8f9fa;
    }
    .container {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #1976d2;
      text-align: center;
      margin-bottom: 10px;
      font-size: 24px;
    }
    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      font-size: 16px;
    }
    .test-step {
      background: #e3f2fd;
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
      border-left: 5px solid #1976d2;
    }
    .test-step h3 {
      margin: 0 0 15px 0;
      color: #1976d2;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .step-number {
      background: #1976d2;
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px;
    }
    .code-block {
      background: #2d3748;
      color: #e2e8f0;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.4;
      margin: 15px 0;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-all;
    }
    .copy-btn {
      background: #4caf50;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      margin-top: 10px;
      width: 100%;
      touch-action: manipulation;
    }
    .copy-btn:hover {
      background: #45a049;
    }
    .copy-btn:active {
      background: #3d8b40;
      transform: scale(0.98);
    }
    .quick-test {
      background: #fff3e0;
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
      border-left: 5px solid #ff9800;
    }
    .success {
      background: #e8f5e8;
      color: #2e7d32;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      border: 1px solid #a5d6a7;
    }
    .error {
      background: #ffebee;
      color: #c62828;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      border: 1px solid #ef9a9a;
    }
    .warning {
      background: #fff3e0;
      color: #ef6c00;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      border: 1px solid #ffcc02;
    }
    .browser-check {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin: 20px 0;
    }
    .browser-item {
      background: white;
      padding: 15px;
      border-radius: 8px;
      border: 2px solid #e0e0e0;
      cursor: pointer;
      transition: all 0.3s;
    }
    .browser-item:hover {
      border-color: #1976d2;
      background: #f8f9fa;
    }
    .browser-item.selected {
      border-color: #4caf50;
      background: #e8f5e8;
    }
    .test-result {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      min-height: 50px;
      border: 2px dashed #ddd;
    }
    .action-btn {
      background: #ff5722;
      color: white;
      border: none;
      padding: 15px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      width: 100%;
      margin: 10px 0;
      touch-action: manipulation;
    }
    .action-btn:hover {
      background: #e64a19;
    }
    .checklist {
      background: #f0f4f8;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
    }
    .checklist-item {
      display: flex;
      align-items: center;
      margin: 10px 0;
      padding: 8px;
      background: white;
      border-radius: 6px;
    }
    .checklist-item input[type="checkbox"] {
      margin-right: 10px;
      transform: scale(1.2);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“± ëª¨ë°”ì¼ ë¶ë§ˆí´ë¦¿ ì‹¤ì „ í…ŒìŠ¤íŠ¸</h1>
    <div class="subtitle">VForKorea ìë™í™” ë„êµ¬ê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”</div>

    <!-- ì‚¬ì „ ì²´í¬ -->
    <div class="quick-test">
      <h3>âš¡ ë¹ ë¥¸ ì¤€ë¹„ ì²´í¬</h3>
      <div class="checklist">
        <div class="checklist-item">
          <input type="checkbox" id="check1">
          <label for="check1">ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €ì—ì„œ JavaScriptê°€ í™œì„±í™”ë˜ì–´ ìˆìŒ</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="check2">
          <label for="check2">VForKorea.comì— ì ‘ì† ê°€ëŠ¥</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="check3">
          <label for="check3">ì˜¤ëŠ˜ ë§ˆê° ë²•ì•ˆì´ 1ê°œ ì´ìƒ ìˆìŒ</label>
        </div>
      </div>
    </div>

    <!-- 1ë‹¨ê³„: ê¸°ë³¸ JavaScript í…ŒìŠ¤íŠ¸ -->
    <div class="test-step">
      <h3><span class="step-number">1</span>ê¸°ë³¸ JavaScript í…ŒìŠ¤íŠ¸</h3>
      <p>ë¨¼ì € ë¸Œë¼ìš°ì €ì—ì„œ JavaScriptê°€ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤:</p>
      
      <button class="action-btn" onclick="testBasicJS()">ğŸ§ª ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
      <div id="basic-test-result" class="test-result">
        ì—¬ê¸°ì— í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤...
      </div>
    </div>

    <!-- 2ë‹¨ê³„: ë¶ë§ˆí´ë¦¿ ì½”ë“œ ë³µì‚¬ -->
    <div class="test-step">
      <h3><span class="step-number">2</span>ë¶ë§ˆí´ë¦¿ ì½”ë“œ ì¤€ë¹„</h3>
      <p>ë‹¤ìŒ ì½”ë“œë¥¼ ë³µì‚¬í•˜ì—¬ ë¶ë§ˆí¬ë¡œ ì €ì¥í•˜ì„¸ìš”:</p>
      
      <div class="code-block" id="bookmarklet-code"></div>
      <button class="copy-btn" onclick="copyBookmarkletCode()">ğŸ“‹ ë¶ë§ˆí´ë¦¿ ì½”ë“œ ë³µì‚¬</button>
      
      <div class="warning">
        <strong>ğŸ’¡ ëª¨ë°”ì¼ì—ì„œ ë¶ë§ˆí¬ ë§Œë“¤ê¸°:</strong><br>
        1. ì•„ë¬´ í˜ì´ì§€ë‚˜ ë¶ë§ˆí¬ë¡œ ì €ì¥<br>
        2. ë¶ë§ˆí¬ í¸ì§‘ â†’ URL ì™„ì „íˆ ì‚­ì œ<br>
        3. ë³µì‚¬í•œ ì½”ë“œ ë¶™ì—¬ë„£ê¸°<br>
        4. ì´ë¦„ì„ "VForKorea Tool"ë¡œ ë³€ê²½
      </div>
    </div>

    <!-- 3ë‹¨ê³„: VForKoreaì—ì„œ í…ŒìŠ¤íŠ¸ -->
    <div class="test-step">
      <h3><span class="step-number">3</span>VForKorea ì‹¤ì „ í…ŒìŠ¤íŠ¸</h3>
      <p>VForKorea ì‚¬ì´íŠ¸ì—ì„œ ë¶ë§ˆí´ë¦¿ì„ ì‹¤í–‰í•´ë³´ì„¸ìš”:</p>
      
      <button class="action-btn" onclick="window.open('https://vforkorea.com/assem/', '_blank')">ğŸŒ VForKorea ì—´ê¸°</button>
      
      <div class="success">
        <strong>âœ… ì„±ê³µ ì‹œ ë‚˜íƒ€ë‚˜ëŠ” í˜„ìƒ:</strong><br>
        â€¢ í™”ë©´ ìš°ìƒë‹¨ì— "ğŸ“ ì˜¤ëŠ˜ ë§ˆê° ë²•ì•ˆ (Xê±´)" íŒ¨ë„ì´ ë‚˜íƒ€ë‚¨<br>
        â€¢ ê° ë²•ì•ˆë³„ë¡œ ì°¬ì„±/ë°˜ëŒ€ ë²„íŠ¼ì´ ë³´ì„<br>
        â€¢ "ì˜ê²¬ ë“±ë¡ ì‹œì‘" ë²„íŠ¼ì´ í™œì„±í™”ë¨
      </div>
      
      <div class="error">
        <strong>âŒ ì‹¤íŒ¨ ì‹œ í™•ì¸ì‚¬í•­:</strong><br>
        â€¢ íŒ¨ë„ì´ ì „í˜€ ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ<br>
        â€¢ ì½˜ì†”ì— ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ<br>
        â€¢ ë¶ë§ˆí´ë¦¿ í´ë¦­í•´ë„ ì•„ë¬´ ë°˜ì‘ ì—†ìŒ
      </div>
    </div>

    <!-- 4ë‹¨ê³„: ëŒ€ì•ˆ í…ŒìŠ¤íŠ¸ (ê°œë°œì ë„êµ¬) -->
    <div class="test-step">
      <h3><span class="step-number">4</span>ê°œë°œì ë„êµ¬ ëŒ€ì•ˆ í…ŒìŠ¤íŠ¸</h3>
      <p>ë¶ë§ˆí´ë¦¿ì´ ì•ˆ ë˜ë©´ ê°œë°œì ë„êµ¬ë¡œ ì§ì ‘ ì‹¤í–‰:</p>
      
      <div class="code-block" id="direct-code"></div>
      <button class="copy-btn" onclick="copyDirectCode()">ğŸ“‹ ì§ì ‘ ì‹¤í–‰ ì½”ë“œ ë³µì‚¬</button>
      
      <div class="warning">
        <strong>ğŸ’¡ ê°œë°œì ë„êµ¬ ì‚¬ìš©ë²•:</strong><br>
        <strong>Kiwi Browser:</strong> ë©”ë‰´ â†’ Developer tools â†’ Console<br>
        <strong>Firefox:</strong> ë©”ë‰´ â†’ ë„êµ¬ â†’ ì›¹ ê°œë°œì â†’ ì½˜ì†”<br>
        <strong>Chrome (USB ë””ë²„ê¹…):</strong> PCì—ì„œ chrome://inspect
      </div>
    </div>

    <!-- 5ë‹¨ê³„: ê²°ê³¼ í™•ì¸ -->
    <div class="test-step">
      <h3><span class="step-number">5</span>ìµœì¢… ê²°ê³¼ í™•ì¸</h3>
      <p>í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”:</p>
      
      <div class="browser-check">
        <div class="browser-item" onclick="reportResult('success')">
          âœ… ì„±ê³µ! íŒ¨ë„ì´ ë‚˜íƒ€ë‚˜ê³  ì •ìƒ ì‘ë™í•¨
        </div>
        <div class="browser-item" onclick="reportResult('partial')">
          âš ï¸ ë¶€ë¶„ ì„±ê³µ: íŒ¨ë„ì€ ë‚˜íƒ€ë‚˜ì§€ë§Œ ì¼ë¶€ ê¸°ëŠ¥ ì´ìƒ
        </div>
        <div class="browser-item" onclick="reportResult('failed')">
          âŒ ì‹¤íŒ¨: íŒ¨ë„ì´ ì „í˜€ ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ
        </div>
        <div class="browser-item" onclick="reportResult('error')">
          ğŸš¨ ì˜¤ë¥˜: ì—ëŸ¬ ë©”ì‹œì§€ ë°œìƒ
        </div>
      </div>
      
      <div id="result-feedback" class="test-result"></div>
    </div>

    <!-- ì¶”ê°€ ì •ë³´ ìˆ˜ì§‘ -->
    <div class="test-step">
      <h3><span class="step-number">6</span>ë””ë²„ê¹… ì •ë³´ ìˆ˜ì§‘</h3>
      <p>ë¬¸ì œê°€ ìˆë‹¤ë©´ ë‹¤ìŒ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”:</p>
      
      <button class="action-btn" onclick="collectDebugInfo()">ğŸ” ë””ë²„ê¹… ì •ë³´ ìˆ˜ì§‘</button>
      <div id="debug-info" class="test-result"></div>
    </div>
  </div>

  <script>
    // ë¶ë§ˆí´ë¦¿ ì½”ë“œ ìƒì„±
    const jsURL = 'https://alfms1.github.io/against-bad-law/vote-bookmarklet.js';
    const bookmarkletCode = `javascript:(function(){var s=document.createElement('script');s.src='${jsURL}';document.body.appendChild(s);})();`;
    const directCode = `(function(){var s=document.createElement('script');s.src='${jsURL}';document.body.appendChild(s);})();`;

    // ì½”ë“œ í‘œì‹œ
    document.getElementById('bookmarklet-code').textContent = bookmarkletCode;
    document.getElementById('direct-code').textContent = directCode;

    // ê¸°ë³¸ JavaScript í…ŒìŠ¤íŠ¸
    function testBasicJS() {
      const result = document.getElementById('basic-test-result');
      try {
        // ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
        const tests = [
          { name: 'JavaScript ì‹¤í–‰', test: () => typeof window !== 'undefined' },
          { name: 'DOM ì¡°ì‘', test: () => document.createElement('div') instanceof HTMLElement },
          { name: 'LocalStorage', test: () => typeof localStorage !== 'undefined' },
          { name: 'í˜„ì¬ ë„ë©”ì¸', test: () => window.location.hostname }
        ];

        let resultHTML = '<h4>ğŸ§ª ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ê²°ê³¼:</h4>';
        let allPassed = true;

        tests.forEach(({ name, test }) => {
          try {
            const result = test();
            const passed = !!result;
            allPassed = allPassed && passed;
            resultHTML += `<div style="color: ${passed ? 'green' : 'red'}; margin: 5px 0;">
              ${passed ? 'âœ…' : 'âŒ'} ${name}: ${passed ? (typeof result === 'string' ? result : 'í†µê³¼') : 'ì‹¤íŒ¨'}
            </div>`;
          } catch (e) {
            allPassed = false;
            resultHTML += `<div style="color: red; margin: 5px 0;">âŒ ${name}: ì˜¤ë¥˜ - ${e.message}</div>`;
          }
        });

        resultHTML += `<div style="margin-top: 15px; padding: 10px; border-radius: 6px; background: ${allPassed ? '#e8f5e8' : '#ffebee'}; color: ${allPassed ? '#2e7d32' : '#c62828'};">
          <strong>${allPassed ? 'âœ… ëª¨ë“  ê¸°ë³¸ í…ŒìŠ¤íŠ¸ í†µê³¼!' : 'âŒ ì¼ë¶€ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨'}</strong>
        </div>`;

        result.innerHTML = resultHTML;
      } catch (e) {
        result.innerHTML = `<div style="color: red;">âŒ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜: ${e.message}</div>`;
      }
    }

    // ë¶ë§ˆí´ë¦¿ ì½”ë“œ ë³µì‚¬
    async function copyBookmarkletCode() {
      try {
        await navigator.clipboard.writeText(bookmarkletCode);
        showCopySuccess('ë¶ë§ˆí´ë¦¿ ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
      } catch (err) {
        fallbackCopy(bookmarkletCode, 'ë¶ë§ˆí´ë¦¿ ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
      }
    }

    // ì§ì ‘ ì‹¤í–‰ ì½”ë“œ ë³µì‚¬
    async function copyDirectCode() {
      try {
        await navigator.clipboard.writeText(directCode);
        showCopySuccess('ê°œë°œì ë„êµ¬ìš© ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
      } catch (err) {
        fallbackCopy(directCode, 'ê°œë°œì ë„êµ¬ìš© ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
      }
    }

    // ë³µì‚¬ ì„±ê³µ í‘œì‹œ
    function showCopySuccess(message) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #4caf50;
        color: white;
        padding: 12px 20px;
        border-radius: 6px;
        z-index: 10000;
        font-weight: bold;
      `;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        document.body.removeChild(notification);
      }, 3000);
    }

    // ë³µì‚¬ ëŒ€ì²´ ë°©ë²•
    function fallbackCopy(text, message) {
      const textArea = document.createElement('textarea');
      textArea.value = text;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);
      showCopySuccess(message);
    }

    // ê²°ê³¼ ë³´ê³ 
    function reportResult(type) {
      const feedback = document.getElementById('result-feedback');
      const items = document.querySelectorAll('.browser-item');
      
      // ì„ íƒ ìƒíƒœ ì—…ë°ì´íŠ¸
      items.forEach(item => item.classList.remove('selected'));
      event.target.classList.add('selected');

      const messages = {
        success: {
          color: '#2e7d32',
          bg: '#e8f5e8',
          title: 'ğŸ‰ ì™„ë²½í•œ ì„±ê³µ!',
          content: 'ë¶ë§ˆí´ë¦¿ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤. VForKoreaì—ì„œ ìë™í™” ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!'
        },
        partial: {
          color: '#ef6c00',
          bg: '#fff3e0',
          title: 'âš ï¸ ë¶€ë¶„ ì„±ê³µ',
          content: 'ê¸°ë³¸ ê¸°ëŠ¥ì€ ì‘ë™í•˜ì§€ë§Œ ì¼ë¶€ ê°œì„ ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–´ë–¤ ë¶€ë¶„ì— ë¬¸ì œê°€ ìˆëŠ”ì§€ ì•Œë ¤ì£¼ì„¸ìš”.'
        },
        failed: {
          color: '#c62828',
          bg: '#ffebee',
          title: 'âŒ ì‘ë™ ì‹¤íŒ¨',
          content: 'ë¶ë§ˆí´ë¦¿ì´ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê°œë°œì ë„êµ¬ ë°©ë²•ì„ ì‹œë„í•´ë³´ê±°ë‚˜ ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”.'
        },
        error: {
          color: '#c62828',
          bg: '#ffebee',
          title: 'ğŸš¨ ì˜¤ë¥˜ ë°œìƒ',
          content: 'ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.'
        }
      };

      const msg = messages[type];
      feedback.innerHTML = `
        <div style="color: ${msg.color}; background: ${msg.bg}; padding: 15px; border-radius: 8px;">
          <h4 style="margin: 0 0 10px 0;">${msg.title}</h4>
          <p style="margin: 0;">${msg.content}</p>
        </div>
      `;
    }

    // ë””ë²„ê¹… ì •ë³´ ìˆ˜ì§‘
    function collectDebugInfo() {
      const debugInfo = document.getElementById('debug-info');
      try {
        const info = {
          userAgent: navigator.userAgent,
          viewport: `${window.innerWidth}x${window.innerHeight}`,
          domain: window.location.hostname,
          protocol: window.location.protocol,
          jsEnabled: typeof window !== 'undefined',
          localStorageAvailable: typeof localStorage !== 'undefined',
          touchSupport: 'ontouchstart' in window,
          timestamp: new Date().toLocaleString()
        };

        let debugHTML = '<h4>ğŸ” ë””ë²„ê¹… ì •ë³´:</h4>';
        Object.entries(info).forEach(([key, value]) => {
          debugHTML += `<div style="margin: 5px 0;"><strong>${key}:</strong> ${value}</div>`;
        });

        debugHTML += `
          <div style="margin-top: 15px; padding: 10px; background: #f0f4f8; border-radius: 6px;">
            <strong>ğŸ“‹ ì´ ì •ë³´ë¥¼ ë³µì‚¬í•´ì„œ ë¬¸ì œ ì‹ ê³ ì‹œ í•¨ê»˜ ì œê³µí•´ì£¼ì„¸ìš”</strong>
          </div>
        `;

        debugInfo.innerHTML = debugHTML;
      } catch (e) {
        debugInfo.innerHTML = `<div style="color: red;">âŒ ë””ë²„ê¹… ì •ë³´ ìˆ˜ì§‘ ì‹¤íŒ¨: ${e.message}</div>`;
      }
    }

    // í˜ì´ì§€ ë¡œë“œì‹œ ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ìë™ ì‹¤í–‰
    document.addEventListener('DOMContentLoaded', function() {
      // 2ì´ˆ í›„ ìë™ìœ¼ë¡œ ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
      setTimeout(testBasicJS, 2000);
    });
  </script>
</body>
</html>
